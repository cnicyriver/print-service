(function(){var n,i,r,t;n=require("./OnlyOneTask");i=require("cluster");r=require("moment");t=require("./nconf");module.exports=function(r){var u,e,o,f;if(i.isMaster){if(t.get("print:autoCheckPrint"))return u=n.define("checkPrintTask",function(n){if(n)return u.exec()}),u.crashTime=t.get("print:checkCrashTime")||1e4,o=n.define("clearOldTask"),e=n.define("checkTimeoutLogs"),f=n.define("loopPrintTask",function(n){if(n)return f.exec()}),f.crashTime=5e3,setInterval(function(){return u.exec(),o.exec(),e.exec(),f.exec()},5e3)}else return n.define("checkPrintTask",function(n){return r.models.print_manage.getOneEarlyChecked(function(t,i){return i?i.queryStatus(function(t,i){return i.print_staus===0?n(i):r.models.print_log.loopFill(i.print_manage_id,function(){return n(i)})}):n()})}),n.define("clearOldTask",function(n){return r.models.print_log.clearOld(n)}),n.define("checkTimeoutLogsTask",function(n){return r.models.print_log.checkTimeoutLogs(n)}),n.define("loopPrintTask",function(n){return r.models.print_log.loopPrint(n)})}}).call(this);
/*
//# sourceMappingURL=printTask.min.js.map
*/